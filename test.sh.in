#!/bin/sh

test_case=$1
shift

if [ -z "${test_case}" ]; then
	(
	echo "use: $0 all | <test case> [other options]"
	echo "where test cases are:"
	for f in test/*.cpp; do
        sed -n '/BOOST_AUTO_TEST_/{s/^.*BOOST_AUTO_TEST_CASE *( *//; s/^.*BOOST_AUTO_TEST_SUITE *( *//; s/ *).*//; p}' $f
	done
	) |less
	exit
else
	if [ "${test_case}" != "all" ]; then
		tests="--run_test=${test_case}"
	fi
fi

LD_LIBRARY_PATH=@BOOST_LIBDIR@ test/test_util $tests $*
